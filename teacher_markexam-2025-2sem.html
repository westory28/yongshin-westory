<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>역사과 시험 문제 출제 도구</title>
    <style>
        body { font-family: 'Malgun Gothic', sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; background-color: #f4f6f8; }
        h2 { border-bottom: 2px solid #333; padding-bottom: 10px; margin-top: 30px; }
        
        /* 공통 스타일 */
        .btn { padding: 5px 10px; cursor: pointer; border: none; border-radius: 4px; font-weight: bold; }
        .btn-add { background-color: #4CAF50; color: white; }
        .btn-sub { background-color: #2196F3; color: white; font-size: 0.9em; margin-top: 5px; }
        .btn-del { background-color: #ff5252; color: white; margin-left: 5px; }
        
        .input-text { padding: 5px; border: 1px solid #ddd; border-radius: 4px; }
        .input-score { width: 50px; text-align: center; padding: 5px; border: 1px solid #ddd; border-radius: 4px; }

        /* 문제 박스 스타일 */
        .question-box { background: white; border: 1px solid #ccc; padding: 15px; margin-bottom: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .question-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .question-body { margin-top: 10px; }

        /* 객관식 보기 스타일 */
        .choice-row { display: flex; align-items: center; margin: 5px 0; font-size: 0.9em; }
        .choice-num { width: 20px; text-align: center; margin-right: 5px; font-weight: bold; }

        /* 서술형 계열화(새끼 문제) 스타일 */
        .sub-question-container { margin-left: 20px; padding-left: 15px; border-left: 3px solid #e0e0e0; margin-top: 10px; }
        .sub-question-box { background-color: #fafafa; border: 1px solid #eee; padding: 10px; margin-bottom: 5px; border-radius: 4px; }
    </style>
</head>
<body>

    <h1 style="text-align: center;">역사과 시험 문제 출제</h1>

    <h2>1. 객관식 (선택형) <button class="btn btn-add" onclick="addMultipleChoice()">+ 문항 추가</button></h2>
    <div id="container-multiple">
        </div>

    <h2>2. 서술형 (논술형) <button class="btn btn-add" onclick="addSubjective()">+ 문항 추가</button></h2>
    <div id="container-subjective">
        </div>

    <script>
        // 공통: 요소 삭제 함수
        function removeElement(element) {
            if(confirm('이 문항을 삭제하시겠습니까?')) {
                element.remove();
            }
        }

        /* --- 객관식 관련 함수 --- */
        function addMultipleChoice() {
            const container = document.getElementById('container-multiple');
            const div = document.createElement('div');
            div.className = 'question-box';
            
            // 객관식 HTML 구조
            div.innerHTML = `
                <div class="question-header">
                    <div>
                        <strong>[객관식]</strong>
                        <input type="text" class="input-text" placeholder="질문을 입력하세요" style="width: 400px;">
                    </div>
                    <div>
                        <input type="number" class="input-score" placeholder="배점"> 점
                        <button class="btn btn-del" onclick="removeElement(this.closest('.question-box'))">삭제</button>
                    </div>
                </div>
                <div class="question-body">
                    ${[1, 2, 3, 4, 5].map(num => `
                        <div class="choice-row">
                            <span class="choice-num">①②③④⑤`[num-1] + `</span>
                            <input type="text" class="input-text" placeholder="보기 ${num}" style="width: 90%;">
                        </div>
                    `).join('')}
                </div>
            `;
            container.appendChild(div);
        }

        /* --- 서술형 관련 함수 --- */
        function addSubjective() {
            const container = document.getElementById('container-subjective');
            const div = document.createElement('div');
            div.className = 'question-box';
            
            // 고유 ID 생성 (새끼 문제 연결용)
            const questionId = 'sub-' + Date.now(); 

            // 서술형 HTML 구조 (계열화 포함)
            div.innerHTML = `
                <div class="question-header">
                    <div>
                        <strong>[서술형 큰 번호]</strong>
                        <input type="text" class="input-text" placeholder="큰 질문을 입력하세요 (예: 다음 자료를 보고...)" style="width: 350px;">
                    </div>
                    <div>
                        <input type="number" class="input-score" placeholder="배점"> 점
                        <button class="btn btn-del" onclick="removeElement(this.closest('.question-box'))">삭제</button>
                    </div>
                </div>
                
                <div class="question-body">
                    <button class="btn btn-sub" onclick="addSubQuestion('${questionId}')">└ 새끼 문제 추가</button>
                    <div id="${questionId}" class="sub-question-container"></div>
                </div>
            `;
            container.appendChild(div);
        }

        // 서술형 하위(새끼) 문제 추가 함수
        function addSubQuestion(parentId) {
            const parentContainer = document.getElementById(parentId);
            const subDiv = document.createElement('div');
            subDiv.className = 'sub-question-box';

            subDiv.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <span>└ (소문항)</span>
                        <input type="text" class="input-text" placeholder="새끼 질문 내용" style="width: 300px;">
                    </div>
                    <div>
                        <input type="number" class="input-score" placeholder="배점"> 점
                        <button class="btn btn-del" style="padding: 2px 5px; font-size: 0.8em;" onclick="removeElement(this.closest('.sub-question-box'))">X</button>
                    </div>
                </div>
            `;
            parentContainer.appendChild(subDiv);
        }
    </script>
</body>
</html>
